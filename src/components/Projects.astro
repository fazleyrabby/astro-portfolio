---
import { Image } from "astro:assets";
import { getProjects } from "../../lib/notion";
let projects = [];
projects = await getProjects();
---

<h1 class="text-xl font-bold mt-6 font-serif">Projects</h1>

<div class="hover-parent mx-auto space-y-6 lg:space-y-0 lg:gap-6 lg:grid lg:grid-cols-3">
  {projects.map((item) => (
    <div class="hover:z-5 transition-all" key={item.id ?? item.title}>
      <div class="bg-white group hover:outline-dashed dark:outline dark:hover:outline-dashed outline-slate-600">
        <a
          href={item.live || item.github || "#"}
          target="_blank"
          rel="noreferrer"
          aria-label={item.title}
        >
          {item.thumbnail && (
            <Image
              src={item.thumbnail}
              class="object-cover object-left-top hover:animate-objtoright w-full lg:h-48 thumbnails"
              alt={item.title}
              width={600}
              height={300}
              loading="lazy"
              data-thumbnail={item.thumbnail}
            />
          )}
        </a>
        <div class="px-3 py-2 dark:bg-black">
          <h2 class="text-gray-900 dark:text-gray-100 text-lg font-bold mb-2">
            {item.title}
          </h2>
          <p class="text-gray-700 dark:text-gray-100 text-sm mb-4">
            {item.description}
          </p>
          <div class="flex gap-2 flex-wrap">
            {item.tech?.map((tech, idx) => (
              <span
                class="py-1 px-2 border rounded-sm text-slate-500 dark:text-gray-100 font-medium uppercase text-[11px]"
                key={idx}
              >
                {tech}
              </span>
            ))}
          </div>
        </div>
        <div class="flex space-x-2 flex-wrap pt-3 px-3 border-t border-t-slate-100 dark:bg-black">
          {item.live && (
            <a
              class="transition flex-grow text-gray-900 hover:text-white border border-gray-200 hover:bg-gray-900 font-medium rounded-sm text-sm px-3 py-1.5 text-center mb-2 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 grid place-content-center"
              href={item.live}
              target="_blank"
            >
              Preview
            </a>
          )}
          {item.github && (
            <a
              class="transition flex-grow text-gray-900 hover:text-white border border-gray-200 hover:bg-gray-900 font-medium rounded-sm text-sm px-3 py-1.5 text-center mb-2 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-700 grid place-content-center"
              href={item.github}
              target="_blank"
            >
              Github
            </a>
          )}
        </div>
      </div>
    </div>
  ))}
</div>