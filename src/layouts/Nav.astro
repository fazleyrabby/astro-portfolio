---
const pathname = new URL(Astro.request.url).pathname;
const currentPath = pathname.slice(1);
import ThemeIcon from "@components/ThemeIcon.astro";

const navItems = [
    { href: "/posts/", label: "Posts", path: "posts" },
    { href: "/uses/", label: "Uses", path: "uses" },
    { href: "/gallery/", label: "Gallery", path: "gallery" },
    { href: "/resources/", label: "Resources", path: "resources" },
];
---

<header
    class="sticky top-0 z-50 w-full border-b border-gray-200/50 dark:border-gray-700/50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl"
>
    <nav class="container mx-auto py-4 px-4">
        <div class="flex items-center justify-between">
            <!-- Logo -->
            <a href="/" class="flex items-center gap-2 group">
                <span
                    class="text-xl font-bold font-logo text-gray-900 dark:text-white group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors"
                >
                    Fazley
                </span>
            </a>

            <!-- Desktop Navigation -->
            <div class="hidden md:flex items-center gap-1">
                {
                    navItems.map((item) => (
                        <a
                            href={item.href}
                            class={`px-4 py-2 text-sm font-medium transition-all duration-200 ${
                                currentPath.includes(item.path)
                                    ? "text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/30"
                                    : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-800/50"
                            }`}
                        >
                            {item.label}
                        </a>
                    ))
                }
                <div
                    class="ml-2 pl-2 border-l border-gray-200 dark:border-gray-700"
                >
                    <ThemeIcon />
                </div>
            </div>

            <!-- Mobile Menu Button & Theme Toggle -->
            <div class="flex md:hidden items-center gap-2">
                <ThemeIcon />
                <button
                    id="mobile-menu-button"
                    class="p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"
                    aria-label="Toggle menu"
                >
                    <svg
                        class="w-6 h-6"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Mobile Navigation Menu -->
        <div id="mobile-menu" class="hidden md:hidden mt-4 pb-2">
            {
                navItems.map((item) => (
                    <a
                        href={item.href}
                        class={`block px-4 py-2 text-sm font-medium transition-all duration-200 ${
                            currentPath.includes(item.path)
                                ? "text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/30"
                                : "text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-800/50"
                        }`}
                    >
                        {item.label}
                    </a>
                ))
            }
        </div>
    </nav>
</header>

<script>
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");

    mobileMenuButton?.addEventListener("click", () => {
        mobileMenu?.classList.toggle("hidden");
    });
</script>
